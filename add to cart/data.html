<link rel="stylesheet" href="css/bootstrap.min.css" type="text/css">
<link rel="stylesheet" href="css/all.min.css" type="text/css">
<link rel="stylesheet" href="css/styles.css" type="text/css">

<a class="button-like-m" href="order.html">Order Now -></a>

<div id="res"></div>
<div class="hello">
    <svg preserveAspectRatio="xMidYMid slice" viewBox="10 10 80 80">
        <defs>
            
        </defs>
        <path fill="#9b5de5" class="out-top" d="M37-5C25.1-14.7,5.7-19.1-9.2-10-28.5,1.8-32.7,31.1-19.8,49c15.5,21.5,52.6,22,67.2,2.3C59.4,35,53.7,8.5,37-5Z"/>
        <path fill="#f15bb5" class="in-top" d="M20.6,4.1C11.6,1.5-1.9,2.5-8,11.2-16.3,23.1-8.2,45.6,7.4,50S42.1,38.9,41,24.5C40.2,14.1,29.4,6.6,20.6,4.1Z"/>
        <path fill="#00bbf9" class="out-bottom" d="M105.9,48.6c-12.4-8.2-29.3-4.8-39.4.8-23.4,12.8-37.7,51.9-19.1,74.1s63.9,15.3,76-5.6c7.6-13.3,1.8-31.1-2.3-43.8C117.6,63.3,114.7,54.3,105.9,48.6Z"/>
        <path fill="#00f5d4" class="in-bottom" d="M102,67.1c-9.6-6.1-22-3.1-29.5,2-15.4,10.7-19.6,37.5-7.6,47.8s35.9,3.9,44.5-12.5C115.5,92.6,113.9,74.6,102,67.1Z"/>
    </svg>
</div>
<script src="js/bootstrap.bundle.min.js"></script>
<script>
    function view_data() {
        var view = JSON.parse(localStorage.getItem('bhimo'));
        var data = "<table border='1' class='curde-two' style='align-items: center; display: flex; justify-content: center; border: 0px solid black;'>";
        var sum = 0;
        if (view) {
            for (var i = 0; i < view.length; i++) {
                var totalPrice = view[i].datee * view[i].quantity;
                sum += totalPrice;


                data += '<tr class="curde_two">';
                data += `<td><div class="card" style="width: 18rem;">
    <img src="${view[i]['imageUrl']}" alt="Image ${i}" width="100">     
  <div class="card-body">
    <h5 class="card-title">New Price = ${view[i]['age']}</h5>
    <p class="card-title fs-6">New Price = ₹${view[i]['datee']}</p>
    <p class="card-text fs-6"><del>Old Price = ₹${view[i]['description']}</del></p>
    <p class="card-text fs-6">Quantity = ${view[i]['quantity']}</p>
    <p class="card-text fs-6">Total price = ${totalPrice}</p>
    <a class="button-like-m" href="javascript:updateProduct('${view[i]['age']}')">Update</a>
    <a class="button-like" href="javascript:delete_data(${i})">Delete</a>
  </div>
</div>
</td> <td></td>`;
                data += ` <td></td>`;
                data += ` <td></td>`;
                data += ` <td></td>`;
                data += `<td> </td><td> </td>`;
                data += '</tr>';
            }
        }
        data += `<tr><td colspan="15"  class="total-color">Total Price = ₹${sum}</td></tr>`;
        data += '</table>';
        document.getElementById('res').innerHTML = data;
    }

    function delete_data(index) {
        var del = JSON.parse(localStorage.getItem('bhimo'));
        del.splice(index, 1);
        localStorage.setItem('bhimo', JSON.stringify(del));
        view_data();
    }

    function updateProduct(productName) {
        var newQuantity = prompt("Enter the new quantity:");
        if (newQuantity !== null) {
            newQuantity = parseInt(newQuantity);
            if (!isNaN(newQuantity)) {
                var upd = JSON.parse(localStorage.getItem('bhimo'));
                for (var i = 0; i < upd.length; i++) {
                    if (upd[i]['age'] === productName) {
                        upd[i]['quantity'] = newQuantity;
                        break;
                    }
                }
                localStorage.setItem('bhimo', JSON.stringify(upd));
                view_data();
            } else {
                alert("Please enter a valid quantity.");
            }
        }
    }

    view_data();
</script>